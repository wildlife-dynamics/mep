id: mep_monthly_report
requirements:
  - name: ecoscope-workflows-core
    version: "0.3.7.*"
    channel: https://repo.prefix.dev/ecoscope-workflows/
  - name: ecoscope-workflows-ext-ecoscope
    version: "0.3.7.*"
    channel: https://repo.prefix.dev/ecoscope-workflows/
  - name: ecoscope-workflows-ext-mep
    version: "0.0.2.*"
    channel: https://repo.prefix.dev/ecoscope-workflows-custom/
  - name: ecoscope-workflows-ext-custom
    version: "*"
    channel: file:///tmp/ecoscope-workflows-custom/release/artifacts/

workflow:
  - name: Time Range
    id: time_range
    task: set_time_range
    partial:
      time_format: "%d %b %Y %H:%M:%S %Z"
  - name: Create Monthly Report
    id: monthly_report
    task: gather_doc
    partial:
      title: "MEP Monthly Report"
      time_range: ${{ workflow.time_range.return}}
      root_path:  ${{ env.ECOSCOPE_WORKFLOWS_RESULTS }}
      filename: "mep_monthly_report"
      doc_widgets: []

  - name: Gather Output Files
    id: output_files
    task: gather_output_files
    partial:
      files:
        - ${{ workflow.monthly_report.return }}
        - ${{ workflow.monthly_report.return }}

